# Preprod configuration - development-level logging but using file appenders for container deployment
# Similar verbosity to development but writes to files that can be shipped to S3

#the default where not overriden
# Mojolicious seems to have trouble with TRACE level messages
log4perl.rootLogger = DEBUG, rootLog

# start at the lowest logging level I want to accept, and define the log file
# Models and other backend code to systemLogFile
# The default needs to be the rootLogger so that the ::EvonyTKR package works.
# So specify only specific overrides here.
log4perl.category.App.Schierer.HPFan.Model = TRACE, systemLogFile
log4perl.category.App.Schierer.HPFan.Shared = DEBUG, systemLogFile
log4perl.category.App.Schierer.HPFan.Converter = DEBUG, systemLogFile
log4perl.category.Mojolicious = DEBUG, webLogFile
log4perl.category.MojoX = DEBUG, webLogFile
log4perl.category.Web = DEBUG, webLogFile

# Turn off additivity for specific categories to prevent double logging
log4perl.additivity.App.Schierer.HPFan.Model = 0
log4perl.additivity.App.Schierer.HPFan.Shared = 0
log4perl.additivity.App.Schierer.HPFan.Converter = 0
log4perl.additivity.Mojolicious = 0
log4perl.additivity.MojoX = 0
log4perl.additivity.Web = 0
log4perl.additivity.App.Schierer.HPFan = 0

# Overrides for logging levels - same as development
log4perl.logger.GitRepo.Reader = INFO
log4perl.logger.App.Schierer.HPFan.Controller.Root = WARN
log4perl.logger.App.Schierer.HPFan.Logger.Config = WARN
log4perl.logger.App.Schierer.HPFan.Model.AscendingAttributes = WARN
log4perl.logger.App.Schierer.HPFan.Model.AscendingAttributes.Manager = DEBUG
log4perl.logger.App.Schierer.HPFan.Model.BasicAttribute = WARN
log4perl.logger.App.Schierer.HPFan.Model.BasicAttributes = WARN
log4perl.logger.App.Schierer.HPFan.Model.Book = WARN
log4perl.logger.App.Schierer.HPFan.Model.Book.Builtin = WARN
log4perl.logger.App.Schierer.HPFan.Model.Book.Importer = WARN
log4perl.logger.App.Schierer.HPFan.Model.Book.Manager = WARN
log4perl.logger.App.Schierer.HPFan.Model.Book.SkillBook = WARN
log4perl.logger.App.Schierer.HPFan.Model.Buff = WARN
log4perl.logger.App.Schierer.HPFan.Model.Buff::Matcher = WARN
log4perl.logger.App.Schierer.HPFan.Model.Buff.Summarizer = WARN
log4perl.logger.App.Schierer.HPFan.Model.Buff.Value = WARN
log4perl.logger.App.Schierer.HPFan.Model.Covenant = WARN
log4perl.logger.App.Schierer.HPFan.Model.Covenant.Manager = WARN
log4perl.logger.App.Schierer.HPFan.Model.Data = WARN
log4perl.logger.App.Schierer.HPFan.Model.EvonyTKR.Manager = WARN
log4perl.logger.App.Schierer.HPFan.Model.General = WARN
log4perl.logger.App.Schierer.HPFan.Model.General.ConflictGroup = WARN
log4perl.logger.App.Schierer.HPFan.Model.General.ConflictGroup.Importer = WARN
log4perl.logger.App.Schierer.HPFan.Model.General.ConflictGroup.Manager = WARN
log4perl.logger.App.Schierer.HPFan.Model.General.Importer = WARN
log4perl.logger.App.Schierer.HPFan.Model.General.Manager = WARN
log4perl.logger.App.Schierer.HPFan.Model.General.Pair = WARN
log4perl.logger.App.Schierer.HPFan.Model.General.Pair.Manager = WARN
log4perl.logger.App.Schierer.HPFan.Model.Logger = WARN
log4perl.logger.App.Schierer.HPFan.Model.Specialty = WARN
log4perl.logger.App.Schierer.HPFan.Model.Specialty.Manager = WARN

log4perl.logger.App.Schierer.HPFan.Controller.AscendingAttributes = DEBUG
log4perl.logger.App.Schierer.HPFan.Controller.BuiltinBooks = WARN
log4perl.logger.App.Schierer.HPFan.Controller.ControllerBase = WARN
log4perl.logger.App.Schierer.HPFan.Controller.Covenants = DEBUG
log4perl.logger.App.Schierer.HPFan.Controller.GeneralConflictGroups = WARN
log4perl.logger.App.Schierer.HPFan.Controller.Generals = DEBUG
log4perl.logger.App.Schierer.HPFan.Control.Generals = WARN
log4perl.logger.App.Schierer.HPFan.Controller.Specialties = WARN
log4perl.logger.App.Schierer.HPFan.Controller.SkillBooks = WARN
log4perl.logger.App.Schierer.HPFan.Plugins = DEBUG
log4perl.logger.App.Schierer.HPFan.Plugins.Markdown = WARN
log4perl.logger.App.Schierer.HPFan.Plugins.Navigation = WARN
log4perl.logger.App.Schierer.HPFan.Plugins.StaticPages = WARN

# Root log file appender

log4perl.appender.rootLog = Log::Dispatch::FileRotate
log4perl.appender.rootLog.autoflush = 1
log4perl.appender.rootLog.DatePattern = yyyy-MM-dd
log4perl.appender.rootLog.filename = sub { sprintf("%s/root.log", App::Schierer::HPFan::Logger::Config::getLogDir()) }
log4perl.appender.rootLog.layout = Log::Log4perl::Layout::PatternLayout
log4perl.appender.rootLog.layout.ConversionPattern = [%p] %d (%C line %L) %m%n
log4perl.appender.rootLog.max = 7
log4perl.appender.rootLog.mode = append
log4perl.appender.rootLog.utf8 = 1
#log4perl.appender.rootLog.binmode = :encoding(UTF-8)
log4perl.appender.rootLog.size = 10485760
log4perl.appender.rootLog.TZ = UTC

# Web log file appender
log4perl.appender.webLogFile = Log::Dispatch::FileRotate
log4perl.appender.webLogFile.autoflush = 1
log4perl.appender.webLogFile.DatePattern = yyyy-MM-dd
log4perl.appender.webLogFile.filename = sub { sprintf("%s/web.log", App::Schierer::HPFan::Logger::Config::getLogDir()) }
log4perl.appender.webLogFile.layout = Log::Log4perl::Layout::PatternLayout
log4perl.appender.webLogFile.layout.ConversionPattern = [%p] %d (%C line %L) %m%n
log4perl.appender.webLogFile.max = 7
log4perl.appender.webLogFile.mode = append
log4perl.appender.webLogFile.utf8 = 1
#log4perl.appender.webLogFile.binmode = :encoding(UTF-8)
log4perl.appender.webLogFile.size = 10485760
log4perl.appender.webLogFile.TZ = UTC

# System log file appender
log4perl.appender.systemLogFile = Log::Dispatch::FileRotate
log4perl.appender.systemLogFile.autoflush = 1
log4perl.appender.systemLogFile.DatePattern = yyyy-MM-dd
log4perl.appender.systemLogFile.filename = sub { sprintf("%s/system.log", App::Schierer::HPFan::Logger::Config::getLogDir()) }
log4perl.appender.systemLogFile.layout = Log::Log4perl::Layout::PatternLayout
log4perl.appender.systemLogFile.layout.ConversionPattern = [%p] %d (%C line %L) %m%n
log4perl.appender.systemLogFile.max = 7
log4perl.appender.systemLogFile.mode = append
log4perl.appender.systemLogFile.utf8 = 1
#log4perl.appender.systemLogFile.binmode = :encoding(UTF-8)
log4perl.appender.systemLogFile.size = 10485760
log4perl.appender.systemLogFile.TZ = UTC
